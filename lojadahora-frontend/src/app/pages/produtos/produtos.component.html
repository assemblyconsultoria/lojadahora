<div class="page-container">
    <div class="page-header">
        <div class="header-icon">üì¶</div>
        <div>
            <h1>Cadastro de Produtos</h1>
            <p class="subtitle">Gerencie o seu cat√°logo de produtos</p>
        </div>
    </div>

    <!-- Mensagem de feedback -->
    <div *ngIf="mensagem" class="alert" [class.alert-success]="!erro" [class.alert-error]="erro">
        {{ mensagem }}
    </div>

    <!-- Formul√°rio -->
    <div class="card form-card">
        <h2>{{ editandoId ? '‚úèÔ∏è Editar Produto' : '‚ûï Novo Produto' }}</h2>
        <form (ngSubmit)="salvar()" #form="ngForm">
            <div class="form-grid">
                <div class="form-group">
                    <label for="nome">Nome do produto</label>
                    <input id="nome" type="text" [(ngModel)]="produtoForm.nome" name="nome"
                        placeholder="Camiseta B√°sica" required />
                </div>
                <div class="form-group">
                    <label for="categoria">Categoria</label>
                    <input id="categoria" type="text" [(ngModel)]="produtoForm.categoria" name="categoria"
                        placeholder="Vestu√°rio" required />
                </div>
                <div class="form-group form-group--full">
                    <label for="descricao">Descri√ß√£o</label>
                    <textarea id="descricao" [(ngModel)]="produtoForm.descricao" name="descricao"
                        placeholder="Descreva o produto..." rows="2"></textarea>
                </div>
                <div class="form-group">
                    <label for="preco">Pre√ßo (R$)</label>
                    <input id="preco" type="number" [(ngModel)]="produtoForm.preco" name="preco" placeholder="0,00"
                        min="0" step="0.01" required />
                </div>
                <div class="form-group">
                    <label for="estoque">Quantidade em Estoque</label>
                    <input id="estoque" type="number" [(ngModel)]="produtoForm.quantidadeEstoque"
                        name="quantidadeEstoque" placeholder="0" min="0" required />
                </div>
            </div>
            <div class="form-actions">
                <button type="submit" class="btn btn-primary" [disabled]="!form.valid">
                    {{ editandoId ? 'Atualizar' : 'Cadastrar' }}
                </button>
                <button type="button" class="btn btn-secondary" *ngIf="editandoId" (click)="cancelarEdicao()">
                    Cancelar
                </button>
            </div>
        </form>
    </div>

    <!-- Tabela de produtos -->
    <div class="card table-card">
        <h2>üìã Produtos Cadastrados</h2>

        <div *ngIf="produtos.length === 0" class="empty-state">
            <span class="empty-icon">üîç</span>
            <p>Nenhum produto cadastrado ainda.</p>
        </div>

        <div class="table-wrapper" *ngIf="produtos.length > 0">
            <table>
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Nome</th>
                        <th>Categoria</th>
                        <th>Descri√ß√£o</th>
                        <th>Pre√ßo</th>
                        <th>Estoque</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let produto of produtos" [class.editing]="editandoId === produto.id">
                        <td class="id-cell">{{ produto.id }}</td>
                        <td><strong>{{ produto.nome }}</strong></td>
                        <td><span class="badge">{{ produto.categoria }}</span></td>
                        <td class="desc-cell">{{ produto.descricao }}</td>
                        <td class="price-cell">R$ {{ produto.preco | number:'1.2-2' }}</td>
                        <td>
                            <span class="stock-badge" [class.low]="produto.quantidadeEstoque < 10">
                                {{ produto.quantidadeEstoque }}
                            </span>
                        </td>
                        <td class="actions-cell">
                            <button class="btn-icon btn-edit" (click)="editar(produto)" title="Editar">‚úèÔ∏è</button>
                            <button class="btn-icon btn-delete" (click)="remover(produto.id!)"
                                title="Remover">üóëÔ∏è</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>